{{ 'beforeafterscroller.css' | asset_url | stylesheet_tag }}

{% liquid
  assign section_title = section.settings.section_title
%}

<section class="hoox-reviews" id="hoox-reviews">

    {% if section_title != blank %}
      <header class="hoox-reviews__header">
        <h2 class="hoox-reviews__title hoox-title text-align-center">{{ section_title }}</h2>
      </header>
    {% endif %}

    {% if section.blocks.size > 0 %}
    <div class="hoox-reviews__wrapper">
      <div class="hoox-reviews__slider-reviews swiper">
        <div class="hoox-reviews__items swiper-wrapper">
          {% for block in section.blocks %}
            {% liquid
              assign review_image = block.settings.review_image
              assign review_country = block.settings.review_country
              assign review_icon = block.settings.review_icon
              assign review_author = block.settings.review_author
              assign review_verified_text = block.settings.review_verified_text
              assign review_percentage = block.settings.review_percentage
              assign percentage_text = block.settings.percentage_text
              assign review_title = block.settings.review_title
              assign review_description = block.settings.review_description
              assign footer_text = block.settings.footer_text
            %}

            <div class="swiper-slide">
              <article class="hoox-reviews__item">
                {% if review_image != blank %}
                  <figure class="hoox-reviews__item-media">
                    {% render 'beforeafterscroller-image', image: review_image %}
                  </figure>
                {% endif %}

                <div class="buyerinfo">
                  {% if review_country != blank %}
                  <figure class="hoox-reviews__item-stars">
                    {% render 'beforeafterscroller-image', image: review_country %}
                  </figure>
                  {% endif %}
                  {% if review_author != blank %}
                   <strong class="hoox-reviews__item-author">{{ review_author }}</strong>
                  <span class="dash">-</span>
                  {% endif %}
                      {% if review_verified_text != blank %}
                        <p class="hoox-reviews__item-verified">
                          {% render 'icon-verified' %} {{ review_verified_text }}
                        </p>
                      {% endif %}
                </div><!--end buyerinfo-->

{% if percentage_text != blank %}
        <div class="percentagehelped">
<h2>{{ review_percentage }}</h2>
  <div class="percentagebar">
  <div class="percentagebarbg" style="width: {{ review_percentage }};"></div>
  {{ percentage_text }}
  </div>
        </div>
  {% endif %}
                  {% if review_title != blank %}
                    <h3 class="hoox-reviews__item-title">{{ review_title }}</h3>
                  {% endif %}

                  {% if review_description != blank %}
                    <div class="reviewbullets">
                 {{ review_description }}
                    </div>
                  {% endif %}
            
{% if footer_text != blank %}
                  <footer class="hoox-reviews__item-footer">
{{ footer_text }}
                  </footer>
   {% endif %}
              </article>
            </div>
          {% endfor %}
        </div>
      </div>
      <div class="hoox-reviews__arrows">
        <div class="slider-reviews-prev hoox-swiper-arrow hoox-swiper-arrow-prev">
          {% render 'arrow-previous' %}
        </div>
        <div class="hoox-reviews__dots"></div>
        <div class="slider-reviews-next hoox-swiper-arrow hoox-swiper-arrow-next">
          {% render 'arrow-next' %}
        </div>
      </div>
    </div>
    {% endif %}

</section>

<script src="{{ 'beforeafter-scroller.js' | asset_url }}" defer="defer"></script>


{% schema %}
{
  "name": "Before/After Scroller",
  "settings": [
    {
      "type": "text",
      "id": "section_id",
      "label": "Section id"
    },
    {
      "type": "text",
      "id": "section_title",
      "label": "Title"
    }
  ],
  "blocks": [
    {
      "type": "review",
      "name": "Review",
      "settings": [
        {
          "type": "image_picker",
          "id": "review_image",
          "label": "Image"
        },
        {
          "type": "image_picker",
          "id": "review_country",
          "label": "Country Icon"
        },
         {
          "type": "text",
          "id": "review_percentage",
          "label": "Percentage (include the % icon)"
        },
        {
          "type": "richtext",
          "id": "percentage_text",
          "label": "Percentage bar text"
        },
        {
          "type": "text",
          "id": "review_title",
          "label": "Title"
        },
        {
          "type": "richtext",
          "id": "review_description",
          "label": "Description Bullets"
        },
        {
          "type": "text",
          "id": "review_author",
          "label": "Author"
        },
        {
          "type": "text",
          "id": "review_verified_text",
          "label": "Verified text",
          "default": "Verified buyer"
        },
         {
          "type": "richtext",
          "id": "footer_text",
          "label": "Footer text"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Before/After Scroller"
    }
  ]
}
{% endschema %}
